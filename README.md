# Memo API

## 프로젝트 개요

이 프로젝트는 Node.js, Express, LokiJS를 사용하여 구현된 간단한 메모(Memo) 관리 REST API입니다. 메모의 생성, 조회, 수정, 삭제(CRUD) 기능을 제공하며, 각 메모는 제목, 내용, 등록 시각 등의 정보를 포함합니다.

API는 명확한 비즈니스 규칙(예: 메모는 생성 후 24시간 이내에만 수정 가능, 30일 후 자동 만료)을 적용하고, 의존성 주입(DI) 패턴과 클린 아키텍처 원칙을 따르도록 설계되었습니다. API 문서는 Swagger를 통해 자동으로 생성됩니다.

## 주요 기능

- **메모 생성**: 새로운 메모를 생성합니다.
- **메모 목록 조회**: 등록일 기준 역순으로 페이징된 메모 목록을 조회합니다.
- **메모 상세 조회**: 특정 메모의 상세 정보를 조회합니다.
- **메모 수정**: 생성 후 24시간 이내인 메모를 수정합니다.
- **메모 삭제**: 생성 후 24시간 이내이거나, 30일이 지난 만료된 메모를 삭제합니다.
- **헬스체크**: 서버의 상태를 확인합니다.
- **API 문서**: Swagger UI를 통해 모든 API 엔드포인트와 상세 설명을 확인할 수 있습니다.

## 기술 스택

- **Node.js**: JavaScript 런타임 환경
- **Express.js**: 웹 애플리케이션 프레임워크
- **LokiJS**: 인-메모리 JavaScript 데이터베이스 (파일 기반 영속성 포함)
- **Swagger (swagger-jsdoc, swagger-ui-express)**: API 문서 자동 생성 및 UI 제공
- **UUID**: 고유 식별자 생성 라이브러리
- **Jest**: 테스팅 프레임워크

## 프로젝트 구조

```bash
memo-api/
├── config/              # 설정 파일 (데이터베이스, Swagger)
├── container/           # 의존성 주입 컨테이너
├── dto/                 # 데이터 전송 객체 (미사용)
├── entities/            # 도메인 엔터티 (Memo)
├── repositories/        # 데이터 저장소 (LokiJS 구현)
├── routes/              # API 라우트 정의
├── services/            # 비즈니스 로직
├── __tests__/           # 테스트 코드
├── index.js             # 애플리케이션 진입점
├── package.json         # 프로젝트 메타데이터 및 의존성
└── README.md            # 프로젝트 설명서
```

## 시작하기

### 사전 요구 사항

- Node.js (버전 14 이상 권장)
- npm (Node.js와 함께 설치됨)

### 설치

1. 프로젝트를 클론하거나 다운로드합니다.
2. 프로젝트 루트 디렉토리에서 다음 명령어를 실행하여 의존성을 설치합니다:

```bash
npm install
```

### 실행

#### 개발 모드

```bash
npm run dev
```

이 명령어는 `nodemon`을 사용하여 파일 변경을 감지하고 서버를 자동으로 재시작합니다.

#### 프로덕션 모드

```bash
npm start
```

이 명령어는 Node.js를 사용하여 서버를 실행합니다.

서버는 기본적으로 `http://localhost:3000`에서 실행됩니다. 포트는 `PORT` 환경변수를 통해 변경할 수 있습니다.

### API 문서

서버가 실행되면 다음 주소에서 Swagger UI를 통해 API 문서를 확인할 수 있습니다:

```
http://localhost:3000/api-docs
```

### 헬스체크

서버 상태는 다음 엔드포인트에서 확인할 수 있습니다:

```
GET http://localhost:3000/health
```

## API 엔드포인트

| 메소드 | 엔드포인트      | 설명                         |
| :----- | :-------------- | :--------------------------- |
| GET    | `/memos`        | 모든 메모 목록 조회 (페이징) |
| POST   | `/memos`        | 새 메모 생성                 |
| GET    | `/memos/{id}`   | 특정 메모 조회               |
| PUT    | `/memos/{id}`   | 특정 메모 수정               |
| DELETE | `/memos/{id}`   | 특정 메모 삭제               |
| GET    | `/health`       | 서버 헬스체크                |
| GET    | `/api-docs`     | Swagger UI                   |
| GET    | `/swagger.json` | OpenAPI 명세서 (JSON)        |

## 비즈니스 규칙

- **제목/내용 유효성**:
  - 제목과 내용은 필수 입력 항목입니다.
  - 제목은 최대 200자, 내용은 최대 5000자까지 입력 가능합니다.
- **수정 제한**:
  - 메모는 생성 후 24시간 이내에만 수정할 수 있습니다.
- **삭제 제한**:
  - 메모는 생성 후 24시간 이내이거나, 30일이 지난 만료된 상태에서만 삭제할 수 있습니다.
- **만료**:
  - 메모는 생성 후 30일이 지나면 만료 상태가 됩니다.

## 개발

### 테스트

Jest를 사용하여 테스트를 실행할 수 있습니다:

```bash
# 모든 테스트 실행
npm test

# 파일 변경 감지하며 테스트 실행 (watch mode)
npm run test:watch

# 테스트 커버리지 확인
npm run test:coverage
```

## 라이선스

MIT License
